[package]
name = "cdfa-panarchy-analyzer"
version = "0.1.0"
edition = "2021"
authors = ["ATS CP Trader Team"]
license = "MIT OR Apache-2.0"
description = "Panarchy cycle analyzer for CDFA with sub-microsecond performance"
keywords = ["trading", "cdfa", "panarchy", "adaptive-cycles", "analysis"]
categories = ["finance", "mathematics", "algorithms"]

[lib]
name = "cdfa_panarchy_analyzer"
crate-type = ["cdylib", "rlib"]

[dependencies]
# Core numerical computing
ndarray = "0.15"
num-traits = "0.2"
approx = "0.5"

# SIMD optimization - using wide for vectorized operations
wide = { version = "0.7", features = ["std"] }

# Parallel processing  
rayon = { version = "1.10", optional = true }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Error handling
thiserror = "1.0"
anyhow = "1.0"

# Mathematical operations
statrs = "0.16"
nalgebra = "0.32"

# Performance timing
instant = { version = "0.1", features = ["now"] }

# Optional hardware acceleration
candle-core = { workspace = true, optional = true }
candle-nn = { workspace = true, optional = true }

# Optional GPU support
wgpu = { version = "0.19", optional = true }

# Cache-aligned allocations
aligned-vec = { version = "0.5", optional = true }

# Lock-free data structures
crossbeam = { version = "0.8", optional = true }
parking_lot = { version = "0.12", optional = true }

# Memory allocator
jemallocator = { version = "0.5.4", optional = true }

# Logging
log = "0.4"

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.5"
rand = "0.8"
float-cmp = "0.9"

[features]
default = ["std", "parallel"]
std = []
simd = ["wide/std"]
parallel = ["dep:rayon", "dep:crossbeam", "dep:parking_lot"]
gpu = ["dep:wgpu", "dep:candle-core", "dep:candle-nn"]
cache_aligned = ["dep:aligned-vec"]
jemalloc = ["dep:jemallocator"]

[profile.release]
lto = true
codegen-units = 1
panic = "abort"
opt-level = 3

[profile.bench]
lto = true
codegen-units = 1
debug = true

[[bench]]
name = "panarchy_benchmarks"
harness = false
required-features = ["std"]

[[example]]
name = "panarchy_analysis"
required-features = ["std"]