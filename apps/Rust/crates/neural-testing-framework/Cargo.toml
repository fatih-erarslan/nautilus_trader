[package]
name = "neural-testing-framework"
version.workspace = true
edition.workspace = true
description = "Comprehensive zero-mock neural network testing framework"
license.workspace = true
repository.workspace = true

[dependencies]
# Core dependencies
ndarray = { workspace = true }
rayon = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
tokio = { workspace = true }
tokio-util = "0.7"
futures = "0.3"
chrono = { version = "0.4", features = ["serde"] }

# Randomization and testing
rand = "0.8"
rand_chacha = "0.3"
proptest = "1.2"
quickcheck = "1.0"

# Mathematical and statistical
nalgebra = "0.32"
statrs = "0.16"
approx = "0.5"

# Performance and benchmarking
criterion = { version = "0.5", features = ["html_reports"] }
pprof = { version = "0.11", features = ["criterion", "flamegraph"] }

# GPU and CUDA support
cudarc = { workspace = true, optional = true }
candle-core = { workspace = true, optional = true }
candle-nn = { workspace = true, optional = true }
tch = { version = "0.13", optional = true }

# Neural network frameworks
ort = { version = "1.16", optional = true }

# Quantum computing
qiskit = { version = "0.1", optional = true }

# Database and persistence
sqlx = { workspace = true, features = ["runtime-tokio-rustls", "chrono"], optional = true }
redis = { version = "0.23", optional = true }

# Metrics and monitoring
prometheus = { version = "0.13", optional = true }
tracing = "0.1"
tracing-subscriber = "0.3"

# Workspace dependencies
cdfa-core = { path = "../cdfa-core" }
neural-forecast = { path = "../neural-forecast" }
quantum-core = { path = "../quantum-core", optional = true }
ruv-fann-integration = { path = "../ruv-fann-integration" }

[dev-dependencies]
tempfile = "3.8"
assert_matches = "1.5"
pretty_assertions = "1.4"
test-case = "3.2"

[features]
default = ["cpu", "persistence"]

# Hardware acceleration
cpu = []
gpu = ["cudarc", "candle-core", "candle-nn"]
cuda = ["gpu", "tch"]

# Neural frameworks
candle-support = ["candle-core", "candle-nn"]
onnx = ["ort"]
pytorch = ["tch"]

# Quantum support
quantum = ["quantum-core", "qiskit"]

# Persistence and monitoring
persistence = ["sqlx", "redis"]
monitoring = ["prometheus"]

# Full feature set
full = [
    "cpu", "gpu", "cuda", 
    "onnx", "pytorch",
    "quantum", "persistence", "monitoring"
]

[[bin]]
name = "neural-test-runner"
path = "src/bin/neural_test_runner.rs"

[[bench]]
name = "neural_benchmarks"
harness = false

[profile.test]
opt-level = 2
debug = true

[profile.bench]
opt-level = 3
debug = false
lto = true

[profile.release]
opt-level = 3
debug = false
lto = true
panic = "abort"

# Performance optimization flags
[profile.release.package."*"]
opt-level = 3

[package.metadata.docs.rs]
features = ["full"]
rustdoc-args = ["--cfg", "docsrs"]