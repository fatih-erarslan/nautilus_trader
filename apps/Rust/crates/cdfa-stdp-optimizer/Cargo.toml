[package]
name = "cdfa-stdp-optimizer"
version = "0.1.0"
edition = "2021"
description = "Ultra-fast STDP (Spike-Timing Dependent Plasticity) optimizer with sub-microsecond performance"
authors = ["Neuro Trader ATS <noreply@neurotrader.com>"]
license = "MIT"
repository = "https://github.com/neuro-trader/cdfa-stdp-optimizer"
categories = ["algorithms", "science", "simulation"]
keywords = ["neuroscience", "plasticity", "learning", "optimization", "real-time"]

[dependencies]
# Core dependencies
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
thiserror = "1.0"
log = "0.4"
env_logger = "0.10"
rayon = { version = "1.8", optional = true }
parking_lot = "0.12"
crossbeam-channel = "0.5"
crossbeam-utils = "0.8"
crossbeam-deque = "0.8"
atomic_refcell = "0.1"
arc-swap = "1.6"
dashmap = "5.5"

# SIMD and performance
wide = { version = "0.7", optional = true }
simdeez = { version = "2.0.0-dev5", optional = true }
aligned-vec = { version = "0.5", optional = true }
num-traits = "0.2"
num-complex = "0.4"
ndarray = { version = "0.15", features = ["rayon"] }
ndarray-stats = "0.5"
nalgebra = { version = "0.32", features = ["serde-serialize"] }

# Memory management
memmap2 = "0.9"
bumpalo = "3.14"
typed-arena = "2.0"
mimalloc = { version = "0.1", default-features = false }

# Time and timing
instant = "0.1"
quanta = "0.12"
spin = "0.9"

# Math and statistics
rand = "0.8"
rand_distr = "0.4"
fastrand = "2.0"
ahash = "0.8"
fxhash = "0.2"

# Optional GPU acceleration
candle-core = { workspace = true, optional = true }
candle-nn = { workspace = true, optional = true }
wgpu = { version = "0.19", optional = true }
bytemuck = { version = "1.14", optional = true }

# Python bindings
pyo3 = { version = "0.25.1", features = ["extension-module"], optional = true }
numpy = { version = "0.25", optional = true }

# Configuration
toml = "0.8"
config = "0.13"

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.4"
quickcheck = "1.0"
quickcheck_macros = "1.0"
approx = "0.5"
tempfile = "3.8"

[features]
default = ["simd", "parallel"]
simd = ["dep:wide", "dep:simdeez", "dep:aligned-vec"]
parallel = ["dep:rayon"]
gpu = ["dep:candle-core", "dep:candle-nn", "dep:wgpu", "dep:bytemuck"]
python = ["pyo3", "numpy"]
full = ["simd", "parallel", "gpu", "python"]

[profile.release]
lto = true
codegen-units = 1
panic = "abort"
opt-level = 3
debug = false
strip = true

[profile.bench]
inherits = "release"
debug = true

[[bench]]
name = "stdp_performance"
harness = false

[[bench]]
name = "temporal_patterns"
harness = false

[[bench]]
name = "weight_plasticity"
harness = false

[lib]
name = "cdfa_stdp_optimizer"
crate-type = ["cdylib", "rlib"]