[package]
name = "hyperphysics-reasoning-router"
version = "0.1.0"
edition = "2021"
authors = ["HyperPhysics Team"]
description = "Modular hierarchical reasoning router with LSH-based similarity routing and Thompson Sampling backend selection"
license = "MIT OR Apache-2.0"
repository = "https://github.com/hyperphysics/hyperphysics"
keywords = ["reasoning", "routing", "physics", "optimization", "bandit"]
categories = ["algorithms", "science", "simulation"]

[features]
default = ["simd"]
simd = ["simdeez"]
gpu = ["wgpu"]
hnsw = ["ruvector-core", "hnsw_rs"]
full = ["simd", "gpu", "hnsw"]

[dependencies]
# Core
thiserror = "2.0"
anyhow = "1.0"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Async
async-trait = "0.1"
tokio = { version = "1.0", features = ["rt-multi-thread", "sync", "time"] }

# Math & Stats
nalgebra = "0.33"
rand = "0.8"
rand_distr = "0.4"
statrs = "0.18"

# Performance
smallvec = { version = "1.0", features = ["serde"] }
parking_lot = "0.12"
dashmap = "6.0"
crossbeam = "0.8"

# Optional SIMD
simdeez = { version = "1.0", optional = true }

# Optional GPU
wgpu = { version = "23.0", optional = true }

# Optional HNSW vector indexing (10-100x faster than LSH)
ruvector-core = { path = "../vendor/ruvector/crates/ruvector-core", optional = true, default-features = false, features = ["simd", "hnsw", "storage", "uuid-support"] }
hnsw_rs = { version = "0.3", optional = true }

# Logging
tracing = "0.1"

# Time
chrono = { version = "0.4", features = ["serde"] }

# UUID for problem IDs
uuid = { version = "1.0", features = ["v4"] }

[dev-dependencies]
tokio = { version = "1.0", features = ["rt-multi-thread", "macros", "test-util"] }
tokio-test = "0.4"
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.0"

[[bench]]
name = "routing_benchmark"
harness = false
