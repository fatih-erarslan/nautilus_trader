# Neural Trader - Production Configuration
# WARNING: This is a template. Copy and customize for your environment.
# NEVER commit actual secrets to version control.

[environment]
name = "production"
log_level = "info"
debug = false

[server]
host = "0.0.0.0"
port = 8080
workers = 4
max_connections = 1000
request_timeout_ms = 30000
keepalive_timeout_s = 75

[database]
# PostgreSQL connection
url = "${DATABASE_URL}"  # Set via environment variable
max_connections = 20
min_connections = 5
connection_timeout_s = 30
idle_timeout_s = 600
max_lifetime_s = 1800

[redis]
# Redis for caching and real-time data
url = "${REDIS_URL}"  # Set via environment variable
pool_size = 10
connection_timeout_ms = 5000
command_timeout_ms = 1000

[market_data]
# Market data providers
providers = ["alpaca", "binance"]

[market_data.alpaca]
api_url = "https://api.alpaca.markets"
data_url = "https://data.alpaca.markets"
api_key = "${ALPACA_API_KEY}"
api_secret = "${ALPACA_API_SECRET}"
rate_limit_per_minute = 200

[market_data.binance]
api_url = "https://api.binance.com"
ws_url = "wss://stream.binance.com:9443"
api_key = "${BINANCE_API_KEY}"
api_secret = "${BINANCE_API_SECRET}"
rate_limit_per_minute = 1200

[execution]
# Order execution settings
max_orders_per_second = 10
max_position_size_usd = 100000
default_time_in_force = "day"
enable_paper_trading = false
require_manual_approval = false

[risk]
# Risk management limits
max_portfolio_drawdown = 0.15  # 15%
max_position_size = 0.10  # 10% of portfolio
max_sector_exposure = 0.30  # 30% per sector
max_daily_loss = 0.05  # 5% daily loss limit
position_sizing_method = "kelly"
stop_loss_pct = 0.02  # 2% stop loss
take_profit_pct = 0.05  # 5% take profit

[backtesting]
# Backtesting configuration
initial_capital = 100000.0
commission_rate = 0.001  # 0.1%
slippage_bps = 5  # 5 basis points
use_realistic_fills = true

[neural]
# Neural network settings
model_path = "/app/models"
cache_predictions = true
prediction_timeout_ms = 100
batch_size = 32
enable_gpu = true

[agentdb]
# AgentDB for persistent memory
enabled = true
db_path = "${AGENTDB_PATH}"
vector_dimensions = 384
enable_quantization = true
quantization_bits = 8
hnsw_ef_construction = 200
hnsw_m = 16

[monitoring]
# Metrics and monitoring
enable_metrics = true
metrics_port = 9090
prometheus_enabled = true
jaeger_enabled = true
jaeger_endpoint = "${JAEGER_ENDPOINT}"

[security]
# Security settings
enable_tls = true
tls_cert_path = "${TLS_CERT_PATH}"
tls_key_path = "${TLS_KEY_PATH}"
require_api_key = true
rate_limit_enabled = true
cors_allowed_origins = ["https://app.neural-trader.io"]

[logging]
# Logging configuration
format = "json"
output = "stdout"
rotation = "daily"
retention_days = 90
enable_audit_log = true

[features]
# Feature flags
enable_websocket = true
enable_graphql = false
enable_rest_api = true
enable_auto_rebalancing = true
enable_ml_predictions = true
enable_social_sentiment = false
