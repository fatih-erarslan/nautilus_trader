# Neural Trader - Staging Configuration

[environment]
name = "staging"
log_level = "debug"
debug = true

[server]
host = "0.0.0.0"
port = 8080
workers = 2
max_connections = 100
request_timeout_ms = 60000
keepalive_timeout_s = 60

[database]
url = "${STAGING_DATABASE_URL}"
max_connections = 10
min_connections = 2
connection_timeout_s = 30
idle_timeout_s = 300
max_lifetime_s = 900

[redis]
url = "${STAGING_REDIS_URL}"
pool_size = 5
connection_timeout_ms = 5000
command_timeout_ms = 2000

[market_data]
providers = ["alpaca"]

[market_data.alpaca]
api_url = "https://paper-api.alpaca.markets"
data_url = "https://data.alpaca.markets"
api_key = "${ALPACA_PAPER_API_KEY}"
api_secret = "${ALPACA_PAPER_API_SECRET}"
rate_limit_per_minute = 200

[execution]
max_orders_per_second = 5
max_position_size_usd = 10000
default_time_in_force = "day"
enable_paper_trading = true
require_manual_approval = true

[risk]
max_portfolio_drawdown = 0.20
max_position_size = 0.15
max_sector_exposure = 0.40
max_daily_loss = 0.10
position_sizing_method = "fixed"
stop_loss_pct = 0.03
take_profit_pct = 0.06

[backtesting]
initial_capital = 50000.0
commission_rate = 0.001
slippage_bps = 10
use_realistic_fills = true

[neural]
model_path = "/app/models"
cache_predictions = true
prediction_timeout_ms = 200
batch_size = 16
enable_gpu = false

[agentdb]
enabled = true
db_path = "${STAGING_AGENTDB_PATH}"
vector_dimensions = 384
enable_quantization = true
quantization_bits = 8
hnsw_ef_construction = 100
hnsw_m = 16

[monitoring]
enable_metrics = true
metrics_port = 9090
prometheus_enabled = true
jaeger_enabled = true
jaeger_endpoint = "${STAGING_JAEGER_ENDPOINT}"

[security]
enable_tls = false
require_api_key = true
rate_limit_enabled = true
cors_allowed_origins = ["http://localhost:3000", "https://staging.neural-trader.io"]

[logging]
format = "pretty"
output = "stdout"
rotation = "daily"
retention_days = 30
enable_audit_log = true

[features]
enable_websocket = true
enable_graphql = false
enable_rest_api = true
enable_auto_rebalancing = true
enable_ml_predictions = true
enable_social_sentiment = false
