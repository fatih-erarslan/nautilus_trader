[workspace]
# This is a standalone NAPI package, not part of the parent workspace

[package]
name = "neural-trader-backend"
version = "2.0.0"
edition = "2021"
authors = ["Neural Trader Team"]
description = "High-performance Neural Trader backend with NAPI-RS bindings for Node.js"
license = "MIT"
repository = "https://github.com/ruvnet/neural-trader"
keywords = ["trading", "neural-network", "napi", "rust", "nodejs"]
categories = ["api-bindings", "finance"]

[lib]
crate-type = ["cdylib"]

[dependencies]
# NAPI-RS core dependencies
napi = { version = "2", features = ["async", "tokio_rt", "error_anyhow", "serde-json"] }
napi-derive = "2"

# Async runtime
tokio = { version = "1", features = ["full"] }

# Internal neural-trader crates
nt-core = { path = "../../crates/core" }
nt-strategies = { path = "../../crates/strategies" }
nt-neural = { path = "../../crates/neural" }
nt-portfolio = { path = "../../crates/portfolio" }
nt-risk = { path = "../../crates/risk" }
nt-backtesting = { path = "../../crates/backtesting" }
nt-sports-betting = { path = "../../crates/sports-betting" }
nt-prediction-markets = { path = "../../crates/prediction-markets" }
nt-syndicate = { path = "../../crates/nt-syndicate" }
nt-e2b-integration = { path = "../../crates/e2b-integration" }
nt-news-trading = { path = "../../crates/news-trading" }

# Error handling and serialization
anyhow = "1"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
thiserror = "1"

# Date/time handling
chrono = { version = "0.4", features = ["serde"] }

# UUID generation
uuid = { version = "1.6", features = ["v4", "serde"] }

# Decimal handling
rust_decimal = { version = "1.33", features = ["serde-float"] }

# DataFrame handling (for neural module)
polars = { version = "0.35", features = ["lazy", "csv"], optional = true }

# Candle ML framework for real neural predictions
candle-core = { version = "0.3", optional = true }
candle-nn = { version = "0.3", optional = true }

# Lazy static for global state
lazy_static = "1.4"

# Parallel processing
rayon = "1.8"

# Random number generation
rand = "0.8"

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# Security dependencies
jsonwebtoken = "9.2"
argon2 = "0.5"
regex = "1.10"
once_cell = "1.19"

[build-dependencies]
napi-build = "2"

[profile.release]
lto = true
strip = true
opt-level = 3
codegen-units = 1

[profile.release.package."*"]
opt-level = 3

[features]
default = []
candle = ["candle-core", "candle-nn"]
