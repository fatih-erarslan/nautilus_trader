[package]
name = "hyperphysics-bench-orchestrator"
version = "0.1.0"
edition = "2021"
description = "Unified benchmark orchestrator for HyperPhysics ecosystem - discovers, executes, and reports on benchmarks/demos/tests"
keywords = ["benchmark", "orchestrator", "performance", "testing", "wasm"]
categories = ["development-tools::testing", "development-tools::profiling"]

[lib]
crate-type = ["cdylib", "rlib"]

[[bin]]
name = "hyperphysics-bench"
path = "src/bin/hyperphysics_bench.rs"

[features]
default = ["cli"]
cli = ["clap", "indicatif", "console"]
wasm = ["wasm-bindgen", "js-sys", "web-sys", "getrandom/js"]

[dependencies]
# Serialization
serde = { workspace = true }
serde_json = { workspace = true }

# Error handling
thiserror = { workspace = true }
anyhow = { workspace = true }

# Async runtime (native only)
tokio = { version = "1.0", features = ["full", "process"], optional = true }

# CLI dependencies (optional)
clap = { version = "4.5", features = ["derive", "color"], optional = true }
indicatif = { version = "0.17", optional = true }
console = { version = "0.15", optional = true }

# WASM dependencies (optional)
wasm-bindgen = { version = "0.2", optional = true }
js-sys = { version = "0.3", optional = true }
web-sys = { version = "0.3", features = ["console", "Window", "Document", "HtmlElement", "Performance"], optional = true }
getrandom = { version = "0.2", optional = true }

# Time handling
chrono = { workspace = true }

# Regex for parsing
regex = "1.10"

# Cross-platform paths
walkdir = "2.5"

# TOML parsing for Cargo.toml discovery
toml = "0.8"

# Concurrent execution
rayon = { workspace = true }
futures = "0.3"

[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
tokio = { version = "1.0", features = ["full", "process"] }

[dev-dependencies]
tempfile = "3.10"
