[package]
name = "cwts-research-validated-tests"
version = "2.0.0"
edition = "2021"

[dependencies]
# Core testing framework
cwts-ultra = { path = "../core" }

# Statistical testing dependencies with research validation
proptest = { version = "1.4", optional = true }
quickcheck = { version = "1.0", optional = true }
quickcheck_macros = { version = "1.0", optional = true }
statrs = { version = "0.16", optional = true }
approx = "0.5"

# Research paper validation dependencies
nalgebra = "0.33"
ndarray = "0.15"
rand = "0.8"
rand_distr = "0.4"

# Time series and financial mathematics
# quantlib = { version = "0.1", optional = true }

# Additional required dependencies for standalone tests
parking_lot = "0.12"

# Performance testing
criterion = { version = "0.5", features = ["html_reports"] }

# Async testing
tokio-test = "0.4"
tokio = { version = "1.35", features = ["full", "test-util"] }

# Network and WebSocket testing
tokio-tungstenite = "0.21"
futures-util = "0.3"

# Crypto and security testing
hmac = "0.12"
sha2 = "0.10"
hex = "0.4"

# Mock and stub framework
mockall = "0.12"
wiremock = "0.5"

# Memory and performance profiling
pprof = { workspace = true, features = ["flamegraph", "protobuf-codec"] }

# Coverage analysis
# tarpaulin = { version = "0.27", optional = true }

# Formal verification support (Z3 theorem prover integration)
z3 = { version = "0.14", optional = true }

# Byzantine fault tolerance testing
libp2p = { version = "0.53", optional = true }

# Error handling
thiserror = "1.0"
anyhow = "1.0"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Logging for test diagnostics
tracing = "0.1"
tracing-subscriber = "0.3"
env_logger = "0.10"

# Time utilities
chrono = { version = "0.4", features = ["serde"] }

# HTTP client for real data testing
reqwest = { version = "0.11", features = ["json"] }

# WASM testing
wasm-bindgen-test = "0.3"

[features]
default = ["research-validation", "property-testing", "statistical-significance"]

# Research validation features
research-validation = ["dep:statrs"]

# Property-based testing
property-testing = ["dep:proptest", "dep:quickcheck"]

# Statistical significance testing
statistical-significance = ["dep:statrs"]

# Coverage analysis
# coverage = []

# Formal verification
formal-verification = ["dep:z3"]

# Byzantine fault tolerance testing
byzantine-testing = ["dep:libp2p"]

# All testing features
comprehensive = [
    "research-validation",
    "property-testing",
    "statistical-significance",
    "formal-verification",
    "byzantine-testing"
]

[profile.test]
opt-level = 2
debug = true
overflow-checks = true

[profile.bench]
opt-level = 3
debug = false
lto = true

# [[bench]]
# name = "bayesian_var_research_benchmarks"
# harness = false

[[test]]
name = "bayesian_var_research_tests"
path = "bayesian_var_research_tests.rs"
required-features = ["research-validation"]

[[test]]
name = "property_based_tests"
path = "property_based_tests.rs"
required-features = ["property-testing"]

[[test]]
name = "byzantine_fault_tolerance_tests"
path = "byzantine_fault_tolerance_tests.rs"
required-features = ["byzantine-testing"]

[[test]]
name = "formal_verification_tests"
path = "formal_verification_tests.rs"
required-features = ["formal-verification"]

[[test]]
name = "liquidation_validation_tests"
path = "financial/liquidation_validation_tests.rs"
required-features = ["research-validation"]